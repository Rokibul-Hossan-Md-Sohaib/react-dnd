{"ast":null,"code":"import _slicedToArray from \"E:\\\\New folder (3)\\\\react-dnd-example\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"E:\\\\New folder (3)\\\\react-dnd-example\\\\src\\\\DropZone.jsx\";\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { useDrop } from \"react-dnd\";\nimport { COMPONENT, SIDEBAR_ITEM, ROW, COLUMN } from \"./constants\";\nvar ACCEPTS = [SIDEBAR_ITEM, COMPONENT, ROW, COLUMN];\nvar DropZone = function DropZone(_ref) {\n  var data = _ref.data,\n    onDrop = _ref.onDrop,\n    isLast = _ref.isLast,\n    className = _ref.className;\n  var _useDrop = useDrop({\n      accept: ACCEPTS,\n      drop: function drop(item, monitor) {\n        onDrop(data, item);\n      },\n      canDrop: function canDrop(item, monitor) {\n        var dropZonePath = data.path;\n        var splitDropZonePath = dropZonePath.split(\"-\");\n        var itemPath = item.path;\n\n        // sidebar items can always be dropped anywhere\n        if (!itemPath) {\n          // if (data.childrenCount >= 3) {\n          //  return false;\n          // }\n          return true;\n        }\n        var splitItemPath = itemPath.split(\"-\");\n\n        // limit columns when dragging from one row to another row\n        var dropZonePathRowIndex = splitDropZonePath[0];\n        var itemPathRowIndex = splitItemPath[0];\n        var diffRow = dropZonePathRowIndex !== itemPathRowIndex;\n        if (diffRow && splitDropZonePath.length === 2 && data.childrenCount >= 3) {\n          return false;\n        }\n\n        // Invalid (Can't drop a parent element (row) into a child (column))\n        var parentDropInChild = splitItemPath.length < splitDropZonePath.length;\n        if (parentDropInChild) return false;\n\n        // Current item can't possible move to it's own location\n        if (itemPath === dropZonePath) return false;\n\n        // Current area\n        if (splitItemPath.length === splitDropZonePath.length) {\n          var pathToItem = splitItemPath.slice(0, -1).join(\"-\");\n          var currentItemIndex = Number(splitItemPath.slice(-1)[0]);\n          var pathToDropZone = splitDropZonePath.slice(0, -1).join(\"-\");\n          var currentDropZoneIndex = Number(splitDropZonePath.slice(-1)[0]);\n          if (pathToItem === pathToDropZone) {\n            var nextDropZoneIndex = currentItemIndex + 1;\n            if (nextDropZoneIndex === currentDropZoneIndex) return false;\n          }\n        }\n        return true;\n      },\n      collect: function collect(monitor) {\n        return {\n          isOver: monitor.isOver(),\n          canDrop: monitor.canDrop()\n        };\n      }\n    }),\n    _useDrop2 = _slicedToArray(_useDrop, 2),\n    _useDrop2$ = _useDrop2[0],\n    isOver = _useDrop2$.isOver,\n    canDrop = _useDrop2$.canDrop,\n    drop = _useDrop2[1];\n  var isActive = isOver && canDrop;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"dropZone\", {\n      active: isActive,\n      isLast: isLast\n    }, className),\n    ref: drop,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  });\n};\nexport default DropZone;","map":{"version":3,"names":["React","classNames","useDrop","COMPONENT","SIDEBAR_ITEM","ROW","COLUMN","ACCEPTS","DropZone","_ref","data","onDrop","isLast","className","_useDrop","accept","drop","item","monitor","canDrop","dropZonePath","path","splitDropZonePath","split","itemPath","splitItemPath","dropZonePathRowIndex","itemPathRowIndex","diffRow","length","childrenCount","parentDropInChild","pathToItem","slice","join","currentItemIndex","Number","pathToDropZone","currentDropZoneIndex","nextDropZoneIndex","collect","isOver","_useDrop2","_slicedToArray","_useDrop2$","isActive","createElement","active","ref","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["E:/New folder (3)/react-dnd-example/src/DropZone.jsx"],"sourcesContent":["import React from \"react\";\r\nimport classNames from \"classnames\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport { COMPONENT, SIDEBAR_ITEM, ROW, COLUMN } from \"./constants\";\r\n\r\nconst ACCEPTS = [SIDEBAR_ITEM, COMPONENT, ROW, COLUMN];\r\n\r\nconst DropZone = ({ data, onDrop, isLast, className }) => {\r\n  const [{ isOver, canDrop }, drop] = useDrop({\r\n    accept: ACCEPTS,\r\n    drop: (item, monitor) => {\r\n      onDrop(data, item);\r\n    },\r\n    canDrop: (item, monitor) => {\r\n      const dropZonePath = data.path;\r\n      const splitDropZonePath = dropZonePath.split(\"-\");\r\n      const itemPath = item.path;\r\n\r\n      // sidebar items can always be dropped anywhere\r\n      if (!itemPath) {\r\n        // if (data.childrenCount >= 3) {\r\n        //  return false;\r\n        // }\r\n        return true;\r\n      }\r\n\r\n      const splitItemPath = itemPath.split(\"-\");\r\n\r\n      // limit columns when dragging from one row to another row\r\n      const dropZonePathRowIndex = splitDropZonePath[0];\r\n      const itemPathRowIndex = splitItemPath[0];\r\n      const diffRow = dropZonePathRowIndex !== itemPathRowIndex;\r\n      if (\r\n        diffRow &&\r\n        splitDropZonePath.length === 2 &&\r\n        data.childrenCount >= 3\r\n      ) {\r\n        return false;\r\n      }\r\n\r\n      // Invalid (Can't drop a parent element (row) into a child (column))\r\n      const parentDropInChild = splitItemPath.length < splitDropZonePath.length;\r\n      if (parentDropInChild) return false;\r\n\r\n      // Current item can't possible move to it's own location\r\n      if (itemPath === dropZonePath) return false;\r\n\r\n      // Current area\r\n      if (splitItemPath.length === splitDropZonePath.length) {\r\n        const pathToItem = splitItemPath.slice(0, -1).join(\"-\");\r\n        const currentItemIndex = Number(splitItemPath.slice(-1)[0]);\r\n\r\n        const pathToDropZone = splitDropZonePath.slice(0, -1).join(\"-\");\r\n        const currentDropZoneIndex = Number(splitDropZonePath.slice(-1)[0]);\r\n\r\n        if (pathToItem === pathToDropZone) {\r\n          const nextDropZoneIndex = currentItemIndex + 1;\r\n          if (nextDropZoneIndex === currentDropZoneIndex) return false;\r\n        }\r\n      }\r\n\r\n      return true;\r\n    },\r\n    collect: (monitor) => ({\r\n      isOver: monitor.isOver(),\r\n      canDrop: monitor.canDrop()\r\n    })\r\n  });\r\n\r\n  const isActive = isOver && canDrop;\r\n  return (\r\n    <div\r\n      className={classNames(\r\n        \"dropZone\",\r\n        { active: isActive, isLast },\r\n        className\r\n      )}\r\n      ref={drop}\r\n    />\r\n  );\r\n};\r\nexport default DropZone;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}